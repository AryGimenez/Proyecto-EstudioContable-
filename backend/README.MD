# Backend - Sistema de GestiÃ³n de Pagos y Alertas

Este backend estÃ¡ desarrollado con **FastAPI** y **SQLAlchemy**. Gestiona usuarios, clientes, pagos, depÃ³sitos e impuestos, proporcionando una API REST segura y escalable.

---

## Estructura de Carpetas

```
backend/
â”‚
â”œâ”€â”€ config.py
â”œâ”€â”€ database.py
â”œâ”€â”€ dependencies.py
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ dockerfile
â”œâ”€â”€ main.py
â”œâ”€â”€ security.py
â”œâ”€â”€ utils.py
â”‚
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ cliente.py
â”‚   â”œâ”€â”€ deposito.py
â”‚   â”œâ”€â”€ impuesto.py
â”‚   â”œâ”€â”€ pago.py
â”‚   â”œâ”€â”€ password_reset_request.py
â”‚   â””â”€â”€ user.py
â”‚
â”œâ”€â”€ router/
â”‚   â”œâ”€â”€ auth.py
â”‚   â”œâ”€â”€ clientes.py
â”‚   â”œâ”€â”€ depositos.py
â”‚   â”œâ”€â”€ impuestos.py
â”‚   â”œâ”€â”€ pagos.py
â”‚   â””â”€â”€ user.py
â”‚
â”œâ”€â”€ schemas/
â”‚   â”œâ”€â”€ auth.py
â”‚   â”œâ”€â”€ cliente.py
â”‚   â”œâ”€â”€ config.py
â”‚   â”œâ”€â”€ deposito.py
â”‚   â”œâ”€â”€ impuesto.py
â”‚   â”œâ”€â”€ pago.py
â”‚   â””â”€â”€ user.py
â”‚
â””â”€â”€ FastApi/
    â”œâ”€â”€ main.py
    â””â”€â”€ router/
        â”œâ”€â”€ auth.py
        â”œâ”€â”€ reauth.py
        â””â”€â”€ users.py
```

---

## DescripciÃ³n de Archivos

### Archivos Principales

- **config.py**  
  ConfiguraciÃ³n global del proyecto (variables de entorno, claves, rutas).

- **database.py**  
  ConfiguraciÃ³n y conexiÃ³n a la base de datos con SQLAlchemy.

- **dependencies.py**  
  Dependencias reutilizables para los endpoints (sesiÃ³n de BD, autenticaciÃ³n).

- **main.py**  
  Punto de entrada de la aplicaciÃ³n FastAPI. Inicializa la app, routers y middlewares.

- **security.py**  
  Funciones de seguridad: manejo de contraseÃ±as y tokens JWT.

- **utils.py**  
  Funciones auxiliares y utilitarias para el backend.

---

### Carpeta `models/`

Modelos ORM que representan las tablas de la base de datos:

- **cliente.py**: Modelo de cliente.
- **deposito.py**: Modelo de depÃ³sito.
- **impuesto.py**: Modelo de impuesto.
- **pago.py**: Modelo de pago.
- **password_reset_request.py**: Solicitudes de restablecimiento de contraseÃ±a.
- **user.py**: Modelo de usuario.

---

### Carpeta `router/`

Endpoints de la API REST:

- **auth.py**: AutenticaciÃ³n (login, registro, recuperaciÃ³n).
- **clientes.py**: CRUD de clientes.
- **depositos.py**: CRUD de depÃ³sitos.
- **impuestos.py**: CRUD de impuestos.
- **pagos.py**: CRUD de pagos.
- **user.py**: GestiÃ³n de usuarios.

---

### Carpeta `schemas/`

Esquemas Pydantic para validaciÃ³n y serializaciÃ³n de datos:

- **auth.py**: Esquemas de autenticaciÃ³n.
- **cliente.py**: Esquemas de clientes.
- **config.py**: Esquemas de configuraciÃ³n.
- **deposito.py**: Esquemas de depÃ³sitos.
- **impuesto.py**: Esquemas de impuestos.
- **pago.py**: Esquemas de pagos.
- **user.py**: Esquemas de usuarios.

---

### Carpeta `FastApi/`

Sub-aplicaciÃ³n o mÃ³dulo adicional:

- **main.py**: Punto de entrada de la sub-aplicaciÃ³n.
- **router/auth.py**: Endpoints de autenticaciÃ³n.
- **router/reauth.py**: Endpoints de re-autenticaciÃ³n.
- **router/users.py**: GestiÃ³n de usuarios.

---

## Despliegue

- Utiliza **Docker** y **Docker Compose** para contenerizaciÃ³n y despliegue.
- Configura variables de entorno y credenciales en `config.py` o archivos `.env`.

---

## Requisitos

- Python 3.9+
- FastAPI
- SQLAlchemy
- Uvicorn
- Otros paquetes segÃºn los modelos y rutas (ver `requirements.txt`)

---

## ContribuciÃ³n

Sigue la estructura modular para agregar nuevos modelos, rutas o esquemas.  
AsegÃºrate de documentar y testear tus cambios.

---

## Licencia

Este proyecto estÃ¡ bajo

## Uvicorn

tener el entorno venv para que funcione uvicorn correctamente.

--- Comandos ---

python -m venv venv  <---- crear entorno virtual venv
source venv/bin/activate  # En Linux/Mac
& venv\Scripts\activate.ps1  # En Windows

(venv) C:\Users\argi\tu-proyecto> deactivate

una vez abierto el venv por primera vez usar 

pip install "uvicorn[standard]"

antes del comando de abajo crear archivos requirements.txt con comando
pip freeze > requirements.txt

despues ejecturar comando 
pip install -r requirements.txt

despues de tener el archivo de arriba ejecutar la instalacion de abajo
pip install fastapi <---  instalar fastapi

cuando tengas todo instalado ya podras usar el comando de abajo

uvicorn main:app --reload  <---- comando para abrir el servidor



# Nombre de tu proyecto

Breve descripciÃ³n del proyecto: para quÃ© sirve, quÃ© problema resuelve y con quÃ© tecnologÃ­as estÃ¡ construido.

---

## ðŸš€ Puesta en marcha

Sigue estos pasos para tener una copia local de este proyecto en funcionamiento en tu mÃ¡quina.

### ðŸ“‹ Requisitos previos

AsegÃºrate de tener instalados los siguientes programas:

- **Python 3.x**
- **pip** (el gestor de paquetes de Python)
- **Node.js** (si tu frontend lo necesita)
- **Flutter** (para el frontend web)

### âš™ï¸ InstalaciÃ³n

1.  **Clona el repositorio**:
    ```bash
    git clone [https://github.com/tu-usuario/tu-proyecto.git](https://github.com/tu-usuario/tu-proyecto.git)
    cd tu-proyecto
    ```

2.  **Configura el backend (Python)**:
    -   Crea un entorno virtual:
        ```bash
        python -m venv venv
        ```
    -   Activa el entorno virtual:
        -   En Windows: `venv\Scripts\activate`
        -   En macOS/Linux: `source venv/bin/activate`
    -   Instala las dependencias del backend:
        ```bash
        pip install -r requirements.txt
        ```

3.  **Configura el frontend (Flutter)**:
    -   Navega al directorio del frontend:
        ```bash
        cd frontend/flutter_gestion_contable
        ```
    -   Instala las dependencias de Flutter:
        ```bash
        flutter pub get
        ```
    -   Compila el proyecto para la web:
        ```bash
        flutter build web
        ```

---

## ðŸ–¥ï¸ Uso

1.  **Vuelve al directorio principal**:
    ```bash
    cd ../..
    ```
2.  **Inicia el servidor backend**:
    ```bash
    uvicorn main:app --reload
    ```
3.  **Abre la aplicaciÃ³n**:
    -   Una vez que el servidor se estÃ© ejecutando, abre tu navegador y visita `http://127.0.0.1:8000`.

---

## ðŸ§© SoluciÃ³n de problemas comunes

AquÃ­ tienes un resumen de los errores que puedes encontrar y cÃ³mo resolverlos.

### 1. `SyntaxError: Missing parentheses in call to 'print'`

-   **Causa**: Este error ocurre cuando una de las librerÃ­as instaladas (como `python-jose`) es una versiÃ³n antigua que utiliza la sintaxis de Python 2.
-   **SoluciÃ³n**: Desinstala y reinstala la librerÃ­a para obtener la versiÃ³n correcta compatible con Python 3.
    ```bash
    pip uninstall python-jose
    pip install "python-jose[cryptography]"
    ```

### 2. `RuntimeError: Directory 'frontend/flutter_gestion_contable/build/web' does not exist`

-   **Causa**: El servidor de Uvicorn no puede encontrar los archivos del frontend porque no han sido generados.
-   **SoluciÃ³n**: AsegÃºrate de haber ejecutado el comando `flutter build web` en el directorio correcto (`frontend/flutter_gestion_contable`) antes de iniciar el servidor.

---

## ðŸ‘¥ ColaboraciÃ³n

Si quieres contribuir a este proyecto, sigue estos pasos:

1.  Haz un "Fork" del proyecto.
2.  Crea tu rama de funciÃ³n (`git checkout -b feature/MiCaracteristicaGenial`).
3.  Haz tus "commits" (`git commit -m 'AÃ±adir nueva caracterÃ­stica'`).
4.  Sube tu rama (`git push origin feature/MiCaracteristicaGenial`).
5.  Abre un "Pull Request".

---

## ðŸ›¡ï¸ Licencia

Este proyecto estÃ¡ bajo la Licencia MIT.


